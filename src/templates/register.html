{% extends "base.html" %}
{% block page_title %}Join{% endblock %}
{% block page_content %}
    <div class="contentbox_top"></div>
    <div class="contentbox_middle" id="register">
        <h1>Join SimpleEditions</h1>
        <p id="subtext">Good choice, matey.</p>
        {% if errors %}
        <div class="error">
            <p>Failed to register:</p>
            <ul>
            {% for error in errors %}
                <li>{{ error }}</li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        <div id="registration_form">
            {% ifequal auth_type "local" %}
            <div id="third_party">
                <p><strong>Pssst!</strong> Do you have an account with any of these services? By choosing any of these services, you will use them for logging in to SimpleEditions. Simple!</p>
                <form action="{{ request.path }}" method="post">
                    <input type="hidden" name="auth_type" value="google"/>
                    <input type="submit" id="google-submit" value="Google" />
                </form>
                <form action="{{ request.path }}" method="post">
                    <input type="hidden" name="auth_type" value="facebook"/>
                    <input type="submit" id="facebook-submit" value="Facebook" />
                </form>
            </div>
            {% endifequal %}
            <form action="{{ request.path }}" method="post">
                {% ifnotequal auth_type "local" %}
                <p>You are registering using <strong>{{ auth_name }}</strong>. If this is not what you wanted, <a href="{{ request.path }}">start over</a>.</p>
                {% endifnotequal %}

                <input type="hidden" name="auth_type" value="{% if auth_type %}{{ auth_type }}{% else %}local{% endif %}"/>
                <label for="display_name">Display name</label>
                <input id="display_name" name="display_name" type="text" value="{% if auth_display_name %}{{ auth_display_name }}{% else %}{{ request.POST.display_name }}{% endif %}" />

                <label for="email">E-mail</label>
                <input id="email" name="email" type="text" value="{% if auth_email %}{{ auth_email }}{% else %}{{ request.POST.email }}{% endif %}" />
                <div class="explanation">Won't be seen by others.</div>

                {% ifequal auth_type "local" %}
                <label for="password">Password</label>
                <input id="password" name="password" type="password" />
                <div class="explanation">At least 6 characters.</div>
                {% endifequal %}

                <input class="breaker" id="submit" type="submit" value="Join" />
                <div class="breaker"></div>
            </form>
        </div>
    </div>
    <div class="contentbox_bottom"></div>
{% endblock %}
